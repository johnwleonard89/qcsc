---
import {
	Container,
	TextCardSection,
} from '@components/odyssey-theme';
import Layout from '../../layouts/Page.astro';
import NewsletterForm from '../../components/forms/NewsletterForm.astro';
import BlogPostsList from '../../components/blog/BlogPostsList.astro';
import { getCollection } from 'astro:content';

const blogPosts = await getCollection('blog');
const sortedPosts = blogPosts.sort((a, b) => new Date(b.data.publish_date).valueOf() - new Date(a.data.publish_date).valueOf());

const seo = {
	title: 'Blog | Queen City Surface Coatings',
	description: 'Expert insights on concrete coatings, surface preparation, and professional installation techniques from Queen City Surface Coatings.',
};
---

<Layout {seo}>
	<Container>
		<TextCardSection>
			<div class="header-content">
				<h1>Expert Insights & Industry Knowledge</h1>
				<p>
					Our blog will feature expert insights on concrete coating techniques, surface preparation methods, industry best practices, and project showcases. We're currently developing comprehensive content to share our military-precision approach and professional expertise with you.
				</p>
				<NewsletterForm />
			</div>
		</TextCardSection>
		
		{sortedPosts.length > 0 ? (
			<section class="blog-posts-section">
				<BlogPostsList posts={sortedPosts} />
			</section>
		) : (
			<section class="coming-soon-section">
				<div class="coming-soon-content">
					<h2>Professional Content Coming Soon</h2>
					<p>We're crafting detailed articles covering:</p>
					<ul class="content-preview">
						<li>Concrete coating selection and application techniques</li>
						<li>Surface preparation best practices</li>
						<li>Behind-the-scenes project walkthroughs</li>
						<li>Maintenance tips for lasting results</li>
						<li>Industry trends and innovations</li>
					</ul>
					<p class="subscribe-message">
						Subscribe to our newsletter above to be notified when our first articles go live. In the meantime, explore our <a href="/portfolio">portfolio</a> to see our work in action, or <a href="/company/contact">contact us</a> for expert advice on your concrete coating project.
					</p>
				</div>
			</section>
		)}
	</Container>
</Layout>

<style>
	.header-content {
		text-align: center;
	}

	.blog-posts-section {
		margin: var(--section-margin) auto;
	}

	.coming-soon-section {
		margin: var(--section-margin) auto;
		text-align: center;
	}

	.coming-soon-content {
		max-width: 800px;
		margin: 0 auto;
		padding: 3rem 2rem;
		background: var(--theme-surface-1);
		border-radius: var(--theme-shape-radius);
		border: 1px solid rgba(0, 0, 0, 0.1);
	}

	.coming-soon-content h2 {
		color: var(--theme-primary);
		margin-bottom: 1.5rem;
		font-size: 2rem;
	}

	.coming-soon-content > p {
		font-size: 1.1rem;
		margin-bottom: 1.5rem;
		opacity: 0.8;
	}

	.content-preview {
		text-align: center;
		max-width: 600px;
		margin: 2rem auto;
		list-style: none;
		padding: 0;
	}

	.content-preview li {
		padding: 0.75rem 0;
		border-bottom: 1px solid rgba(0, 0, 0, 0.1);
	}

	.content-preview li:last-child {
		border-bottom: none;
	}

	.subscribe-message {
		background: rgba(255, 192, 61, 0.1);
		padding: 1.5rem;
		border-radius: 8px;
		border-left: 4px solid var(--theme-primary);
		margin-top: 2rem;
		font-size: 1rem;
		line-height: 1.6;
	}

	.subscribe-message a {
		color: var(--theme-primary);
		text-decoration: none;
		font-weight: 600;
	}

	.subscribe-message a:hover {
		text-decoration: underline;
	}

	@media (max-width: 768px) {
		.coming-soon-content {
			padding: 2rem 1rem;
		}
		
		.coming-soon-content h2 {
			font-size: 1.5rem;
		}
		
		.content-preview {
			text-align: center;
		}
	}
</style>
